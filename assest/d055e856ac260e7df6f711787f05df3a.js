var Juggernaut=Juggernaut||{};Juggernaut.UI=Juggernaut.UI||{};Juggernaut.filter=(function(p,h){var g={keyupdated:"Juggernaut.filter.keyupdated",keyremoved:"Juggernaut.filter.keyremoved",firstregistered:"Juggernaut.filter.firstregistered",onclickerhandle:"Juggernaut.filter.onclickerhandle",presubmit:"Juggernaut.filter.presubmit",showloading:"Juggernaut.filter.showloading",hideloading:"Juggernaut.filter.hideloading",submitted:"Juggernaut.filter.submitted",submittedError:"Juggernaut.filter.submittederror",updatedlist:"Juggernaut.filter.updatedlist",cleared:"Juggernaut.filter.cleared"};var r={unregisterables:[],dontclear:[],nodraw:[],forceArrStore:[],forceAutoSubmit:[],superFilters:[],hideFromUrl:[],xtraAPIParams:{},domain:"",path:"",getContent:{domain:window.location.host}};var c={},a={};var i={groupOpen:{},groupSpecs:{},groupTemp:{},groupSuper:{},groupActive:{}};function l(){f()}function A(D,E){i.groupSpecs[D]=i.groupSpecs[D]||{};var C={unregisterables:i.groupSpecs[D].unregisterables,dontclear:i.groupSpecs[D].dontclear,nodraw:i.groupSpecs[D].nodraw,forceArrStore:i.groupSpecs[D].forceArrStore,forceAutoSubmit:i.groupSpecs[D].forceAutoSubmit,superFilters:i.groupSpecs[D].superFilters};i.groupSpecs[D]=h.extend(true,i.groupSpecs[D],E||{});for(var B in i){i[B][D]=i[B][D]||{}}}function d(C,B){B=B||"temp";if(B==="temp"){return h.extend({},i.groupSpecs[C].xtraAPIParams,i.groupTemp[C],i.groupSuper[C])}else{return h.extend({},i.groupSpecs[C].xtraAPIParams,i.groupActive[C],i.groupSuper[C])}}function w(D,B){var C;switch(B){case"temp":C=i.groupTemp[D];break;case"active":C=i.groupActive[D];break;case"super":C=i.groupSuper[D];break;case"open":C=i.groupOpen[D];break;case"specs":C=i.groupSpecs[D];break}return C}function u(D,B,C){C=C||{};h.when(z(D)).then(function(E){p.updateUI(D,E);if(typeof C.temp==="function"){C.temp()}});if(B==="active"){h("form[data-filter-group="+D+"]").trigger("submit",[D,"active"])}}function q(D){var B=h(D),C,F,E;C=B.attr("name");if(typeof B.attr("data-filter-value")==="string"){F=D.getAttribute("data-filter-value")}else{if(typeof B.attr("value")==="string"){F=B.attr("value")}else{F=B.innerHTML}}var E=D.getAttribute("data-filter-param");if(E==null||E.length<=0){E=B.closest("form[data-filter-group]").attr("data-filter-group")}return{name:C,key:C,val:F,friendlyName:D.getAttribute("data-filter-uiname"),group:E}}function m(F){var B=q(F),D=B.name,I=B.val,G=B.group;var H=i.groupSpecs[G];k(G,B);var E="forceAutoSubmit" in H&&jQuery.inArray(D,H.forceAutoSubmit)>=0?"active":"temp";function C(){if("forceCallback" in H&&jQuery.inArray(D,H.forceCallback)>=0){H.callbacks[D](G,response)}}h(document).trigger("Juggernaut.filter.onclickerhandle",[G,{type:E,name:D}]);u(G,E,{temp:C})}function t(I,D,F){F=F||"temp";var D=D.split("|");for(var E=0;E<D.length;E++){var C=D[E].split("/");if(h.inArray(C[0],i.groupSpecs[I].dontclear)>=0){continue}var H;if(h.inArray(C[0],i.groupSpecs[I].superFilters)>=0){H=i.groupSuper[I]}else{H=w(I,F)}if(H[C[0]] instanceof Array&&H[C[0]].length>=1){var G=h.inArray(C[1],H[C[0]]);if(H[C[0]].length>0&&G>=0){H[C[0]].splice(G,1)}if(H[C[0]].length===0||G<0){delete H[C[0]]}}else{delete H[C[0]]}if(F==="active"){var B=h("input[name="+C[0]+"]");B.removeAttr("checked");if(B[0]&&B[0].getAttribute("data-filter-uiname")==="Most Recent"){B[0].checked=true}}}if(F==="active"){b(I)}h(document).trigger(g.keyremoved,[I,{type:F}])}function k(H,F,E,D){E=E||"temp";var G,C=i.groupSpecs[H],B;if(h.inArray(F.key,C.superFilters)>=0){G=i.groupSuper[H]}else{G=w(H,E)}var I;if(jQuery.inArray(F.key,C.forceArrStore)>=0){I="array"}else{I="single"}if(I==="array"&&!(F.key in G)){B=G[F.key]=[]}if(F.key in G){B=G[F.key]}if(!D&&((B instanceof Array&&jQuery.inArray(F.val,B)>=0)||B===F.val)){t(H,F.key+"/"+F.val,E)}else{if(I==="array"){G[F.key].push(F.val)}else{G[F.key]=F.val}}h(document).trigger(g.keyupdated,[H,h.extend({},F,{type:E})])}function x(B){return i.groupTemp[B]}function n(B){return{groupTemp:i.groupTemp[B],groupActive:i.groupActive[B],groupSuper:i.groupSuper[B],groupSpecs:i.groupSpecs[B],groupOpen:i.groupOpen[B]}}function o(C,B){B=B||"temp";switch(B){case"temp":i.groupTemp[C]={};break;case"active":i.groupActive[C]={};break;case"super":i.groupSuper[C]={};break;case"open":i.groupOpen[C]={};break}h(document).trigger(g.cleared,[C,{type:B}])}function j(B){i.groupActive[B]=jQuery.extend(true,{},i.groupTemp[B])}function v(){return i}function s(C,B){return{show:function(){h(document).trigger(g.showloading,[C,{type:B}])},hide:function(){h(document).trigger(g.hideloading,[C,{type:B}]);h(".loaderPop").hide()}}}function z(L,J,B){J=J||"temp";var G=d(L,J);if(B){h.extend(G,B)}var D=i.groupSpecs[L];if(J==="active"){var F=D.getContent.domain,M=D.getContent.path}else{var F=D.domain,M=D.path}F=F.replace(/.*?:\/\//g,"");var C="//"+F+M;var K={url:C,data:h.juggernaut_ObjToParam(G)};if(window.location.host.toUpperCase()!==F.toUpperCase()){K.dataType="jsonp";K.jsonp="jsoncallback"}else{D.dataType?(K.dataType=D.dataType):(K.dataType="json")}if(!B){s(L,J).show()}var I=C+"?"+decodeURIComponent(h.juggernaut_ObjToParam(G,true));if(I in c&&!h.isEmptyObject(c[I])){if(!B){s(L,J).hide()}return c[I]}else{if(I in a&&!h.isEmptyObject(a[I])){var E=a[I];if(!B){s(L,J).hide()}try{if(typeof E.responseText==="string"){E.responseText=h.parseJSON(E.responseText)}if(E.responseText.code===404){a[I]=E}console.warn(E.responseText);if(!B){h(document).trigger(g.submittedError,[L,{type:J,msg:E.responseText}])}}catch(H){console.warn(H)}return a[I]}else{return h.ajax(K).then(function(N){try{N=h.parseJSON(N)}catch(O){}c[I]=N;s(L,J).hide();return N},function(N){if(!B){s(L,J).hide()}try{if(typeof N.responseText==="string"){N.responseText=h.parseJSON(N.responseText)}if(N.responseText.code===404){a[I]=N}console.warn(N.responseText);if(!B){h(document).trigger(g.submittedError,[L,{type:J,msg:N.responseText}])}}catch(O){console.warn(O)}s(L,J).hide();return N})}}}function b(G){var F=d(G,"active"),H=i.groupSpecs[G],C=H.hideFromUrl,B=h.extend({},F);for(var E=0;E<C.length;E++){delete B[C[E]]}if("pushState" in history){var D=window.location.pathname+"?"+decodeURIComponent(h.juggernaut_ObjToParam(B,true));history.pushState(null,null,D)}}function y(F){var G=i.groupSpecs[F];var C=h("form[data-filter-group="+F+"]");if(typeof C[0]!=="undefined"){var E=C.juggernautFilterSerialize();for(var D=0;D<E.length;D++){var B=E[D];if(jQuery.inArray(B.name,G.unregisterables)<0){k(F,{group:F,val:B.value,key:B.name,friendlyName:B.friendlyName},"temp")}}}}function e(C,D){if(typeof C!=="string"){throw"group name parameter must be a string. "+C+" specified as group";return false}if(C.length<1){throw"group name not specified";return false}if(D&&typeof D!=="object"){throw"type Object expected for params";return false}var B=!(C in i.groupSpecs);if(B){D=h.extend(true,{},r,D)}A(C,D);if(arguments[2]!==true){if(B){y(C);h(document).trigger(g.firstregistered,[C])}}}function f(){h(document).on("submit","form[data-filter-group]",function(E,D,C){E.preventDefault();var B=typeof C==="undefined"?true:false;C=C||"active";D=D||h(this).attr("data-filter-group");if(B){j(D)}h.when(z(D,C)).then(function(F){var G=i.groupSpecs[D];h(document).trigger(g.presubmit,[D]);b(D);h(document).trigger(g.submitted,[D,{type:C,response:F}]);s(D,C).hide()})});h(document).on(g.firstregistered,function(C,D,B){j(D);i.groupSpecs[D].registered=true});h(document).on(g.showloading,function(D,E,C){var B=h("form[data-filter-group="+E+"] *[data-filter-loader]");if("type" in C&&C.type==="temp"){B.show()}else{if(showLoadPop){showLoadPop()}}});h(document).on(g.hideloading,function(D,E,C){var B=h("form[data-filter-group="+E+"] *[data-filter-loader]");if("type" in C&&C.type==="temp"){B.hide()}else{if(hideLoadPop){hideLoadPop()}}})}l();return h.extend(p,{_cache:c,_UIInterfaceHandle:m,groupMerge:d,groupRemoveItem:t,getGroupObjByType:w,groupUpdate:k,getGroup:x,groupClean:o,getGroupGroups:n,saveActive:j,getGroups:v,getElemInfo:q,updateFromForm:y,get:z,getAndSubmit:u,pushStateUrl:b,registerDefaults:e,extendDefaults:e})})(Juggernaut.filter||{},$);Juggernaut.filter=(function(b,c,d){var a=function(f){b._UIInterfaceHandle(this)};c(d).on("change.Juggernaut.inputchange","input[data-filter-param][type=radio],input[data-filter-param][type=checkbox], select[data-filter-param]",function(f){Juggernaut.filter._UIInterfaceHandleWrapper.apply(this,arguments)});c(d).on("change.Juggernaut.inputclicked","a[data-filter-param]",function(f){f.preventDefault();Juggernaut.filter._UIInterfaceHandleWrapper.apply(this,arguments)});c(d).on("jtap","*[data-filter-clear]",function(h){h.preventDefault();var g=this.getAttribute("data-filter-clear"),f=c("form[data-filter-group="+g+"]");f.find("input:text, input:password, input:file, select, textarea").val("");f.find("input:radio, input:checkbox").removeAttr("checked").removeAttr("selected");b.groupClean(g);b.updateFromForm(g);c.when(b.get(g)).then(function(e){b.updateUI(g,e)})});return c.extend(b,{_UIInterfaceHandleWrapper:a})})(Juggernaut.filter||{},$,document);$.fn.juggernautFilterSerialize=function(){var c=/%20/g,e=/\[\]$/,d=/\r?\n/g,b=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,a=/^(?:select|textarea)/i;return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return(this.name&&!this.disabled&&(this.checked||a.test(this.nodeName)||b.test(this.type)))}).map(function(f,g){var j=jQuery(this).val();function h(k){var i={name:k.name,value:j.replace(d,"\r\n")};if(k.getAttribute("data-filter-uiname")!==null){i.friendlyName=k.getAttribute("data-filter-uiname")}return i}return j==null?null:jQuery.isArray(j)?jQuery.map(j,function(l,k){return h(g)}):h(g)}).get()};jQuery.juggernaut_ObjToParam=function(i,g){var c=/%20/g,e=/\[\]$/,k=/\r?\n/g,h=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,b=/^(?:select|textarea)/i;function d(n,p,m,o){var a;if(jQuery.isArray(p)){var q="";jQuery.each(p,function(s,r){q+=r+","});q=q.substring(0,q.length-1);o(n,q)}else{if(!m&&jQuery.type(p)==="object"){for(a in p){d(n+"["+a+"]",p[a],m,o)}}else{o(n,p)}}}var f,l=[],j=function(a,m){m=jQuery.isFunction(m)?m():m==null?"":m;l[l.length]=encodeURIComponent(a)+"="+encodeURIComponent(m)};if(jQuery.isArray(i)||(i.jquery&&!jQuery.isPlainObject(i))){jQuery.each(i,function(){j(this.name,this.value)})}else{for(f in i){d(f,i[f],g,j)}}return l.join("&").replace(c,"+")};Juggernaut.filter=(function(j,e,f){var a={filterListItems:Mustache.compile(f.filterListItems)};var d={responseHelper:function(l,m){return{master:m.tpl||Juggernaut.UI.tpls.rowItems,partials:m.tplPartials||{singleRowItem:Juggernaut.UI.tpls.singleRowItem},tplData:{items:l.items,frontend:{MARVEL_USER:MARVEL_USER||false}}}}};function b(l){return e("*[data-filter-content="+l+"]").length>0?e("*[data-filter-content="+l+"]"):e("#comicsListing")}function k(n){var l=b(n),m=e(".row-item",l[0]).length;return m}function h(p,n){var m=b(p),q=e("*[data-filterCounter="+p+"]"),o=k(p);var l;if(o===n.responseLimit){l="Showing "+o+' <span class="_mediaOvMd-inblock">Result'+(o===1?"":"s")+"</span>"}else{if(o===0){l="No Results"}else{l="Showing "+o+" of "+n.responseLimit+' <span class="_mediaOvMd-inblock">Results</span>'}}q.html(l)}var c={_prepareTpl:function(p,m){if(typeof m==="object"){if("output" in m){var l=m.output}else{var o=e.extend({},d,j.getGroups().groupSpecs[p].viewSettings),n=o.responseHelper(m,o);var l=Mustache.render(n.master,n.tplData,n.partials)}}else{if(typeof m==="string"){var l=m}}return l},append:function(o,m){var l=this._prepareTpl(o,m),n=b(o);if(n.length<1){throw"No view is present for this filter. Filter group name: "+o;return false}n.append(l);e(document).trigger("Juggernaut.filter.updatedlist",[o,{responseLimit:m.count||"",response:m||""}])},insert:function(o,m){var l=this._prepareTpl(o,m),n=b(o);if(n.length<1){throw"No view is present for this filter. Filter group name: "+o;return false}if(Juggernaut.client.ltIE9){n.html(l);e(document).trigger("Juggernaut.filter.updatedlist",[o,{responseLimit:m.count||""}])}else{n.fadeOut("fast",function(){n.html(l);n.fadeIn("fast");e(document).trigger("Juggernaut.filter.updatedlist",[o,{responseLimit:m.count||""}])})}}};function g(n,l){l.filterConfig={filterGroup:n};l.multipleSelect=l.type==="select1"||l.type===""?false:true;var m=a.filterListItems(l),o=e("fieldset[data-filter-fieldset="+l.ref+"]");o.html(m)}function i(q,p){if(typeof p==="object"&&"form" in p.data&&"elements" in p.data.form){var o=p.data.form.elements,l,n;for(l=0;l<o.length;l++){var p=o[l];if("items" in p){g(q,p);var m=e("*[data-filterwidget-pointer="+p.ref+"]").not("._active");if(p.items.length>0){m.removeClass("_disabled")}else{m.addClass("_disabled")}}if(!j.listsearch){throw"Juggernaut.filter.listsearch is not included. Required for searching through filter lists."}else{if(j.listsearch.getInstance(q)&&p.ref in j.listsearch.getInstance(q)){j.listsearch.updateInstance(q,p)}}}}}e(document).on("Juggernaut.filter.updatedlist",function(m,n,l){h(n,l)});e(document).on("Juggernaut.filter.submitted",function(m,n,l){c.insert(n,l.response)});e(document).on("Juggernaut.filter.submittederror",function(n,o,m){var l=b(o);if(m.type==="active"){l.html("");e("*[data-browse-fetchmore="+o+"]").addClass("disabled");h(o,m)}});return e.extend(j,{updateUI:i,drawResults:c,countDrawnResults:k,templater:g})})(Juggernaut.filter||{},$,Juggernaut.UI.tpls);Juggernaut.filter.az=(function(m,d){var j={rendered:"Juggernaut.filter.az.rendered"};var c=Juggernaut.filter,a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","1","2","3","4","5","6","7","8","9","0"],n={};function l(){g()}function i(C,s,B){var z=Juggernaut.utilities.slugify;console.log(s);var t=s.data.results,y=t.length,u=0,r=t[0].title.charAt(0),B=B||r.toUpperCase(),x=B.length;var v=[];var w="";w+='<ul class="JCAZList-MultiCol">';var o=(function(){switch(s.data.target){case"gallery":return function(E){return E.url};case"archetype":return function(E){return E.url};default:return function(E){return("/comics/"+n[C].slugContext+"/"+E.id+"/"+z(E.title))}}})();while(u<y){var D=t[u],A=D.title,p=D.id,q;if(A.toUpperCase().substr(0,x)===B){if(new RegExp("- Present").test(A)){A="<strong>"+A+"</strong>"}w+='<li><a href="'+o(D)+'">'+A+"</a></li>"}u++}w+="</ul>";d("*[data-filter-az-dynamicresults="+C+"]").html(w);hideLoadPop();e(C).showDynamic(B.substr(0,1));d(document).trigger(j.rendered,[C])}function h(u){var o=n[u],p=o.menuItems,w=d("*[data-azMenu="+o.group+"]"),q,s='			<div class="pwrSldr_container">				<a href="#" class="pwrSldr_btn _prev"><span></span></a>				<a href="#" class="pwrSldr_btn _next"><span></span></a>				<div class="pwrSldr_wrapper">					<div id="AZ_Listing">						<ul class="alphabet">';for(var r=0;r<a.length;r++){var t=a[r],v=r==0?"active":"";q=d.inArray(t,p);if(q<0){s+='<li class="disabled"><a href="javascript:void(0);">'+t+"</a></li>"}else{s+='<li><a class="'+v+'" href="#az-list-'+t+'" data-JCAZList-widget-lnk="'+t+'" data-filter-group="'+u+'">'+t+"</a></li>"}}s+="<li></li></ul>			  </div>			</div>		</div>";w.html(s);d("#AZ_Listing").pwrSldr({touch_target:w});setTimeout(function(){d("#AZ_Listing").pwrSldr().draw()},200)}function f(o){o=o||"A";d("a[data-jcazlist-widget-lnk]").removeClass("active");d('a[data-jcazlist-widget-lnk="'+o+'"]').addClass("active")}function e(o){return{showStatic:function(){d("*[data-filter-az-staticresults="+o+"]").show();d("*[data-filter-az-dynamicresults="+o+"]").hide();d("*[data-azMenu="+o+"]").attr("data-filter-az-dynamicview","inactive")},showDynamic:function(p){d("*[data-filter-az-staticresults="+o+"]").hide();d("*[data-filter-az-dynamicresults="+o+"]").show();d("*[data-azMenu="+o+"]").attr("data-filter-az-dynamicview","active")}}}function k(o,p){n[o.group]=o;h(o.group);c.registerDefaults(o.group,p,true)}function g(){b().setTextBoxEv();b().setLnkBinds()}function b(){return{setTextBoxEv:function(){d(document).on("keyup","input[data-filter-az-txtbox]",function(s){s.preventDefault();if(Juggernaut.client.hasTouch){d("[data-sticky-register]").removeClass("sticky")}var r=this.getAttribute("data-filter-az-txtbox");var q=d(this),o=q.val().toUpperCase(),p=o.length,u=o.substr(0,1),t=Juggernaut.filter;if(p>0){t.groupUpdate(r,{key:"startsWith",val:u},"temp",true);d.when(t.get(r)).then(function(w){if(!Juggernaut.client.hasTouch){var v=".JCAZList-widget-wrapper";smoothScroll(v,{offsetY:0,easing:"linear",duration:Juggernaut.client.hasTouch?0:100})}f(u);i(r,w,o)})}else{f();e(r).showStatic()}})},setLnkBinds:function(){d(document).on("click","a[data-JCAZList-widget-lnk]",function(s){s.preventDefault();var r=this.getAttribute("data-filter-group");e(r).showStatic();var q=d("input[data-filter-az-txtbox]")[0];q.value=q.defaultValue;var o="#az-list-"+d(this).attr("data-JCAZList-widget-lnk");var p=d(o).offset().top+-125;smoothScroll(o,{offsetY:-125,easing:"linear",duration:Juggernaut.client.hasTouch?0:500});s.preventDefault()})}}}l();return d.extend(m,{register:k})})(Juggernaut.filter.az||{},$);Juggernaut.filter=(function(k,c){function i(){f()}function j(o){var m=k.getGroups().groupSpecs[o].xtraAPIParams,l=k.getGroups(),n=a(o);k.getGroups().groupActive[o][n.offset]=0;k.getGroups().groupSpecs[o].xtraAPIParams[n.offset]=0;delete k.getGroups().groupActive[o][n.limit]}function e(n){var l=k.getGroups(),m=l.groupSpecs[n].xtraAPIParams;return("offsetLimit" in l.groupSpecs[n]&&l.groupSpecs[n]["offsetLimit"]!==""?parseInt(l.groupSpecs[n]["offsetLimit"]):0)}function a(o){var n=k.groupMerge(o,"active");if("options[limit]" in n||"options[offset]" in n){var m="options[limit]",l="options[offset]"}else{var m="limit",l="offset"}return{limit:m,offset:l}}function h(x,v){var s,o=k.getGroups(),u=o.groupSpecs[x].xtraAPIParams,m=o.groupActive[x],l=a(x);var r=parseInt(u[l.limit]||11),w=e(x),t=k.countDrawnResults(x);m[l.offset]=t;if((m[[l.limit]]!==r+w)){m[l.limit]=r+w}if("replaceState" in history){if(t>r){var n=Juggernaut.utilities.urlParams(l.offset,0);n=Juggernaut.utilities.urlParams("totalcount",k.countDrawnResults(x),n);var q=window.location,p=q.protocol+"//"+q.host+q.pathname+n.substr(1,n.length);history.replaceState(null,null,p)}}}function f(){b().setCustomEvs();b().setShowMoreBinds()}function g(v,o){o=o||{};var n=k.getGroups();var r=n.groupSpecs[v];var p=k.countDrawnResults(v);var m=parseInt(o.responseLimit||r.count);m=isNaN(m)?0:m;var q=p>=m;var s=p>=(k.getGroups().groupSpecs[v].maxLimit||999999);var l=p===0;var u=r.getContent.path==="/comics/discover/show_more";var t=(p>=m&&u);var w=q||t||s||l;if(w){c("*[data-browse-fetchmore="+v+"]").closest(".JCFilter-showmore").addClass("disabled")}else{c("*[data-browse-fetchmore="+v+"]").closest(".JCFilter-showmore").removeClass("disabled")}}function b(){return{setShowMoreBinds:function(){c(document).on("click.fetchMore","*[data-browse-fetchMore]",function(n){n.preventDefault();var m=c(this),l=m.attr("data-browse-fetchMore");if(((l===null||l==="")?true:false)){throw"Fetch more button is not referencing a filter"}h(l);if(!m.closest(".JCFilter-showmore").hasClass("disabled")&&!m.hasClass("_jsDisabled")){c.when(k.get(l,"active")).then(function(o){k.pushStateUrl(l);k.drawResults.append(l,o)},function(o){console.error(o)})}else{k.pushStateUrl(l);k.drawResults.append(l,response)}})},setCustomEvs:function(){c(document).on("Juggernaut.filter.presubmit",function(m,n,l){j(n)});c(document).on("Juggernaut.filter.submitted",function(m,n,l){j(n)});c(document).on("Juggernaut.filter.onclickerhandle",function(m,n,l){if(l.type==="active"){j(n)}});c(document).on("Juggernaut.filter.updatedlist",function(m,n,l){h(n);g(n,l)});c(document).on("Juggernaut.filter.firstregistered",function(m,n,l){h(n);setTimeout(function(){g(n,l)},100)});c(document).on("Juggernaut.filter.showloading",function(m,n,l){if(l.type!=="temp"){c("*[data-browse-fetchmore="+n+"]").addClass("_jsDisabled").find("span").html("loading...")}});c(document).on("Juggernaut.filter.hideloading",function(m,n,l){if(l.type!=="temp"){c("*[data-browse-fetchmore="+n+"]").removeClass("_jsDisabled").find("span").html("show more")}})}}}i();var d=(function(){var n={};function m(t){var r=c("[data-browse-fetchmore-limiter="+t+"]"),q=false,s=[r[0],r.find("dt:eq(0) span:eq(0)")[0],r.find("dd:eq(0)")[0]];for(var p=0;p<s.length;p++){if(typeof s[p]!=="undefined"){q=true}}return q?{limitWidget:r,limitCurrent:r.find("dt:eq(0) span:eq(0)"),limitOptions:r.find("dd:eq(0)")}:null}function o(q,p){p=p||q;return'<span data-browse-fetchmore-limiter-trigger="'+q+'">'+p+"</span>"}function l(w,r){var s=m(w);r=r||{};n[w]=n[w]||{availableLimitOpts:[],currentSetting:null};var x=n[w],v=k.getGroups().groupSpecs[w],t=k.countDrawnResults(w),p=r.responseLimit||parseInt(v.count);var q=a(w);x.originalLimit=x.originalLimit||parseInt(v.xtraAPIParams[q.limit]||11);var u=(function(B){var y=p-t,D=x.originalLimit+e(w),z=[D,(D*3),(D*6),(D*12)],C=x.currentSetting||{val:D,text:D};for(var A=0;A<z.length;A++){if(z[A]==C.val){continue}if(y>z[A]){B+=o(z[A])}else{if(z[A-1]&&y<=z[A-1]||typeof z[A-1]==="undefined"){break}else{B+=o(z[A],"all")}break}}s.limitCurrent.html(y>C.val?C.text:"all");return B})("");s.limitOptions.html(u);if(s.limitOptions.html().length>5){s.limitCurrent.removeClass("_Options_empty")}else{s.limitCurrent.addClass("_Options_empty")}}c(document).on("Juggernaut.filter.firstregistered",function(q,r,p){setTimeout(function(){if(m(r)){l(r,p);var s;c(document).on("mouseenter",".JCFilter-showmore .btn-Merger",function(t){clearTimeout(s);c("[data-browse-fetchmore-limiter]",this).css("left","6px")});c(document).on("mouseleave",".JCFilter-showmore .btn-Merger",function(u){var t=this;s=setTimeout(function(){c("[data-browse-fetchmore-limiter]",t).css("left","-78px");c("._expanded",t).removeClass("_expanded")},900)});c(document).on("click","[data-browse-fetchmore-limiter-trigger]",function(y){var x=c(this).closest("[data-browse-fetchmore-limiter]").attr("data-browse-fetchmore-limiter"),t=k.getGroups().groupSpecs[x].xtraAPIParams,u=m(x),w=a(x),v={val:this.getAttribute("data-browse-fetchmore-limiter-trigger"),text:this.innerHTML};n[x].currentSetting={val:this.getAttribute("data-browse-fetchmore-limiter-trigger"),text:this.innerHTML};u.limitCurrent.html(v.text);u.limitOptions.html("");t[w.limit]=v.val-parseInt(e(x));c(document).trigger.call(c("[data-browse-fetchMore="+x+"]"),"click.fetchMore")});c(document).on("click","[data-browse-fetchmore-limiter] ._Options_empty",function(u){var t=c(this).closest("[data-browse-fetchmore-limiter]").attr("data-browse-fetchmore-limiter");c(document).trigger.call(c("[data-browse-fetchMore="+t+"]"),"click.fetchMore")});c(document).on("Juggernaut.filter.updatedlist",function(u,v,t){l(v,t);m(v).limitWidget.find("._expanded").removeClass("_expanded")})}},100)})})();return c.extend(k,{_resetOffset:j})})(Juggernaut.filter||{},$);var FILTERWIDGET=(function(e,l,h,p){var k={},g={},t=[],a={widget:"data-filterwidget",close:"data-filterwidget-close",pointer:"data-filterwidget-pointer",page:"data-filterwidget-page",back:"data-filterwidget-back",position:"data-filterwidget-position",apply:"data-filterwidget-apply"},d="ontouchstart" in l.documentElement?"touchstart":"click",q="(min-width: 800px)";var o={responsiveArrOverrides:{superFilters:[],forceAutoSubmit:[]},onQuery:{large:function(u){},small:function(u){}}};function s(){c();r()}function r(){var u=h._UIInterfaceHandleWrapper;h._UIInterfaceHandleWrapper=function(){var w=h.getElemInfo(this);var y=w.group,v=h.getGroups(),x=v.groupSuper[y],z=v.groupSpecs[y];var B=z.superFilters,A=z.forceAutoSubmit;if(window.matchMedia(q).matches||w.name in x||jQuery.inArray(w.name,z.forceArrStore)<0&&jQuery.inArray(w.name,z.unregisterables)<0){u.call(this,arguments);if(this.type==="radio"&&!window.matchMedia(q).matches){i()}}else{h.groupUpdate(y,w,"open")}}}function j(){g.$widgets.each(function(){var u=this.getAttribute("data-filterwidget"),v=k[u].$position.first().offset().top+47;e(this).css("top",(v+2)+"px")})}function b(){t=[];g.$widgets.add("._inView").removeClass("_inView");g.$widgets.css("display","none");_instance.$position.removeClass("_newest _inView _active")}function i(){n()}function n(x){x=x||{};function H(){return t[t.length-1]}var F=H();if(!("pageName" in x)){t.pop()}else{if(jQuery.inArray(x.pageName,t)===0){b();return false}else{if(F===x.pageName){return false}else{t.push(x.pageName)}}}var I=t.length;var E="",w="",A;for(var y=0;y<I;y++){A=(y===I-1?"":",");E+="*["+a.pointer+"="+t[y]+"]"+A;w+="*["+a.page+"="+t[y]+"]"+A}var z=w.split(","),D=E.split(",");var C=e(z[0]),B=e(D[0]),v=e(z[z.length-1]),u=e(D[D.length-1]),G=e("*["+a.page+"="+F+"]");e("*["+a.pointer+"]").removeClass("_newest _inView");u.addClass("_newest _inView");B.addClass("_inView");setTimeout(function(){e("*["+a.page+"]").removeClass("_newest").not(v.add(C)).removeClass("_inView").not(G).css("display","none");G.add(v).css("display","block");setTimeout(function(){v.addClass("_newest _inView")},3)},2);if(I===1){e("li[data-filterwidget-pointer=orderBy]").addClass("_newest _inView")}}function f(x){var y=Juggernaut.filter.getGroups().groupOpen[x];for(var v in y){if(y[v] instanceof Array){for(var u=0;u<y[v].length;u++){var w={key:v,name:v,val:y[v][u],group:x};h.groupUpdate(x,w,"temp")}}else{var w={key:v,name:v,val:y[v],group:x};h.groupUpdate(x,w,"temp")}}h.getAndSubmit(x,"temp");h.groupClean(x,"open")}function m(x){var y=Juggernaut.filter.getGroups().groupOpen[x];for(var v in y){if(y[v] instanceof Array){for(var u=0;u<y[v].length;u++){var w=e("input[name="+v+"][value="+y[v][u]+"]");w.prop("checked",function(){console.log(this);return !this.checked})}}else{}}h.groupClean(x,"open")}function c(){e(l).one("Juggernaut.filter.firstregistered.ONLYFIRSTTIME",function(w,x,v){if(e("div[data-respfilter-snippet]").length>0){Juggernaut.mediaQ.addListener(q,function(){e("div[data-respfilter-snippet]").each(function(){e(this).appendTo("*[data-respfilter-large="+this.getAttribute("data-respfilter-snippet")+"]")});e("*[data-respfilter-large]").show();e("*[data-respfilter-small]").hide()},function(){e("div[data-respfilter-snippet]").each(function(){e(this).appendTo("*[data-respfilter-small="+this.getAttribute("data-respfilter-snippet")+"]")});e("*[data-respfilter-large]").hide();e("*[data-respfilter-small]").show()})}e(window).on("resize",p.debounce(j,100,false))});e(l).on("Juggernaut.filter.firstregistered",function(z,A,y){k[A]=_instance={};_instance.$widget=e("*["+a.widget+"="+A+"]");_instance.$position=e("*["+a.position+"="+A+"]");_instance.$close=e("*["+a.close+"="+A+"]");_instance.$widget.appendTo(l.body);g.$widgets=e("*["+a.widget+"]");g.$triggers=e("*["+a.triggers+"]");var v=h.getGroups(),w=v.groupSuper[A],B=v.groupSpecs[A];_instance.settings=e.extend({},o,B.filterWidget||{});e(l).on("Juggernaut.filter.submitted",function(C,D){FILTERWIDGET._close(D)});e(l).on("Juggernaut.filter.submittederror",function(D,E,C){FILTERWIDGET._close(E)});Juggernaut.mediaQ.addListener(q,function(){f(A)},function(){var C=t;t=[];if(C.length>0){t.push(C[0]);if(C.length>1){t.push(C.pop())}}});var x=_instance.settings.responsiveArrOverrides;Juggernaut.mediaQ.addListener(q,function(){_instance.settings.onQuery.large(A);for(var E in x){B[E]=e.unique(B[E].concat(x[E]))}var C=x.superFilters,F=h.getGroups().groupTemp[A];groupActive=h.getGroups().groupActive[A];for(var D=0;D<C.length;D++){var E=C[D];if(E in groupActive){if(typeof groupActive[E]==="object"){throw"superFilter toggling only supports filters that store as primitive types"}w[E]=groupActive[E]}delete F[E];delete groupActive[E];e("input[name="+E+"]").prop("checked",E in w)}},function(){_instance.settings.onQuery.large(A);for(var E in x){B[E]=p.removeByVal(x[E],e.unique(B[E]))}var C=x.superFilters,F=h.getGroups().groupTemp[A];groupActive=h.getGroups().groupActive[A];for(var D=0;D<C.length;D++){var E=C[D];if(E in w){if(typeof w[E]==="object"){throw"superFilter toggling only supports filters that store as primitive types"}if(typeof F[E]==="object"){throw"superFilter toggling only supports filters that store as primitive types"}groupActive[E]=F[E]=w[E]}delete w[E]}})});var u={};u.isIOS=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);u._clkType=u.isIOS?"touchstart":"click";e(l).on(u._clkType,"*["+a.pointer+"]",function(){var v=this;setTimeout(function(){if(!e(v).hasClass("_disabled")){j();n({pageName:v.getAttribute(a.pointer)})}},u.isIOS?150:20)});e(l).on("click","*["+a.close+"]",function(w){w.preventDefault();var v=this.getAttribute(a.close);b(v);return false});e(l).on("click","*["+a.back+"]",function(w){w.preventDefault();var v=this.getAttribute(a.back);m(v);i()});e(l).on("click","*["+a.apply+"]",function(w){w.preventDefault();var v=this.getAttribute(a.apply);f(v);i()})}s();return{_close:b}})($,document,Juggernaut.filter,Juggernaut.utilities);var FILTERINSTANCER=(function(a){var b={defaultTpl:{properties:{unregisterables:["from_month","from_year","to_month","to_year","originalReleaseStart-month","originalReleaseStart-year","originalReleaseEnd-month","originalReleaseEnd-year","dateFilterType","dateFilterSelectDates","releaseDate_Range"],dontclear:["dateStart","dateEnd"],nodraw:["offset","limit"],forceArrStore:["creatorId","characterId"],forceAutoSubmit:["isDigital","variants"],superFilters:["isDigital","variants"],hideFromUrl:["tpl","module_img_variant"],xtraAPIParams:{byZone:"marvel_site_zone",offset:0},filterWidget:{responsiveArrOverrides:{superFilters:["isDigital","variants"],forceAutoSubmit:["isDigital","variants"]}}}},showMoreOnly:{properties:{nodraw:["offset","limit"],hideFromUrl:["options[module_img_variant]","options[tpl]"],xtraAPIParams:{byZone:"marvel_site_zone","options[offset]":0,offset:0,"options[limit]":10}}},sortOnly:{properties:{nodraw:["offset","limit","orderBy"],forceAutoSubmit:["orderBy"],superFilters:["orderBy"],hideFromUrl:["tpl","module_img_variant"],xtraAPIParams:{byZone:"marvel_site_zone",offset:0}}}};return $.extend(a,{templates:b})})(FILTERINSTANCER||{});Juggernaut.filter.stateTagger=(function(l,f,e,j){var h={whenCleared:function(){f('input[value="release_date desc"]').prop("checked",true)}};var i={updatetags:"Juggernaut.filter.updateTags"};var b={};function k(q,n){var p;"friendlyName" in n?p=n.friendlyName:p=n.key;if(!(q in b)){b[q]={}}var o=b[q];if(!(n.key in o)){o[n.key]={}}o[n.key][n.val]=p}var d={store:{},setInStore:function(o,n){d.store[n]=o}};function m(w,t){d.store={};var o=[],z=["originalReleaseStart","originalReleaseEnd"];var p=b[w],v=e.groupMerge(w,t);var q="";for(var x in v){try{var u=v[x],s=p[x],y;if(f.inArray(x,e.getGroups().groupSpecs[w].nodraw)<0){if(!(u instanceof Array)){y=s[u];if(y===z[0]||y===z[1]){o.push(y)}else{if(u.toLowerCase()==="release_date desc"&&t==="active"){continue}else{d.setInStore(x,y)}}}else{(function(){for(var A=0;A<u.length;A++){var B=u[A];y=s[B];d.setInStore(x+"/"+B,y)}})()}}}catch(r){}}var n=o.length;if(n>0){(function(){var B=e.getGroupObjByType(w,t);if(n===1){var A=o[0];if(A===z[0]){d.setInStore(A,"After "+B[A])}else{if(A===z[1]){d.setInStore(A,"Before "+B[A])}}}else{if(n>1){d.setInStore(o.join("|"),"From "+B[o[0]]+" to "+B[o[1]])}}})()}g(w,t)}function g(t,r){var q=d.store;if(r==="active"){var p="";for(var u in q){var s=q[u];p+='<span class="filterActive" data-filter-remove="'+s+'">'+u+'<span class="icon-close"></span></span>'}var v=f("*[data-filter-active="+t+"]");if(p.length>0){f(".filterActiveSet").addClass("hasActiveItems")}else{f(".filterActiveSet").removeClass("hasActiveItems")}v.html(p)}else{if(r==="temp"){for(var u in q){var o=q[u],n=o.split("/");if(n.length>1){u=e.groupMerge(t,r)[n[0]].length+" selected"}else{if(o.indexOf("originalRelease")>=0){n[0]="releaseDate"}}f("*[data-filterwidget-pointer="+n[0]+"] em").html(u)}}}}function a(q){var r=[];for(var o in e.groupMerge(q,"active")){r.push(o);try{var n=f(".filterTabHead input[name="+o+"]");n.removeAttr("checked")}catch(p){console.warn(p)}}r=r.join("|");e.groupRemoveItem(q,r,"temp");e.groupRemoveItem(q,r,"active")}function c(n){f("*[data-filterwidget-pointer] em").html("none selected")}f(j).on("jtap","*[data-filter-clear-active]",function(o){o.preventDefault();var n=this.getAttribute("data-filter-clear-active");c();f("input[name=releaseDate_Range][value=all]").click();f(j).trigger("Juggernaut.filter.onclickerhandle",[n,{type:"active"}]);a(n);m(n,"active")});f(j).on("Juggernaut.filter.firstregistered",function(n,o){if(!(o in b)){b[o]={}}m(o,"active")});f(j).on("Juggernaut.filter.keyupdated",function(o,p,n){k(p,n);if(n.type==="temp"){m(p,n.type)}});f(j).on("Juggernaut.filter.keyremoved",function(o,p,n){if(n.type==="active"){e.getAndSubmit(p,n.type)}m(p,n.type)});f(j).on("Juggernaut.filter.submitted",function(n,o){m(o,"active")});f(j).on("Juggernaut.filter.submittederror",function(o,p,n){console.warn(n.type);if(n.type==="active"){m(p,"active")}});f(j).on("Juggernaut.filter.cleared",function(o,p,n){if(n.type==="temp"){c()}});f(j).on("Juggernaut.filter.firstregistered",function(o,p,n){f("*[data-filterwidget-pointer] em").each(function(){if(f(this).html().length<1){f(this).html("none selected")}})});f(j).on("click","span[data-filter-active] .filterActive",function(q){q.preventDefault();var p=f(this),o=p.closest("span[data-filter-active]").attr("data-filter-active"),n=p.attr("data-filter-remove");f(j).trigger("Juggernaut.filter.onclickerhandle",[o,{type:"active"}]);e.groupRemoveItem(o,n,"temp");e.groupRemoveItem(o,n,"active");if(n==="orderBy"){h.whenCleared()}});f(j).on("Juggernaut.filter.cleared",function(n,o){h.whenCleared()})})(Juggernaut.filter.activeFilters,$,Juggernaut.filter,document);(function(){var b;function c(){b=new a();b.init()}var a=window.Juggernaut.OO.utils.extendClass(window.Juggernaut.OO.Reporting,{getSetProps:{$homePageShowMore:null},pubMethods:{stash:function(){this.$homePageShowMore=$(".JCFilter-showmore .btn-Merger")},listen:function(){this.$homePageShowMore.on(window.Uatu.START_EV,this._onShowMoreClick)},_onShowMoreClick:function(){this.report({event_type:"browse",event_value:"click_show_more",link_name:"SHOW MORE - 12 | Module: Comics New Releases"})}}});$(c)})();